(function(c){function a(){this._nextId=0;this._inst=[];this._curInst=null;this._colorpickerShowing=false;this._colorPickerDiv=c('<div id="colorPickerDiv"></div>')}c.extend(a.prototype,{markerClassName:"hasColorPicker",_register:function(d){var e=this._nextId++;this._inst[e]=d;return e},_getInst:function(d){return this._inst[d]||d},_doKeyDown:function(f){var d=c.colorPicker._getInst(this._colId);if(c.colorPicker._colorpickerShowing){switch(f.keyCode){case 9:c.colorPicker.hideColorPicker();break;case 27:c.colorPicker.hideColorPicker();break}}else{if(f.keyCode==40){c.colorPicker.showFor(this)}}},_resetSample:function(f){var d=c.colorPicker._getInst(this._colId);d._sampleSpan.css("background-color",d._input.value);alert(d._input.value)},_hasClass:function(e,f){var d=e.attr("class");return(d&&d.indexOf(f)>-1)},showFor:function(g){g=(g.jquery?g[0]:(typeof g=="string"?c(g)[0]:g));var d=(g.nodeName&&g.nodeName.toLowerCase()=="input"?g:this);if(c.colorPicker._lastInput==d){return}if(c.colorPicker._colorpickerShowing){return}var e=c.colorPicker._getInst(d._colId);c.colorPicker.hideColorPicker();c.colorPicker._lastInput=d;if(!c.colorPicker._pos){c.colorPicker._pos=c.colorPicker._findPos(d);c.colorPicker._pos[1]+=d.offsetHeight}var f=false;c(d).parents().each(function(){f|=c(this).css("position")=="fixed"});if(f&&c.browser.opera){c.colorPicker._pos[0]-=document.documentElement.scrollLeft;c.colorPicker._pos[1]-=document.documentElement.scrollTop}e._colorPickerDiv.css("position",(c.blockUI?"static":(f?"fixed":"absolute"))).css("left",c.colorPicker._pos[0]+"px").css("top",c.colorPicker._pos[1]+1+"px");c.colorPicker._pos=null;c.colorPicker._showColorPicker(e);return this},_findPos:function(d){while(d&&(d.type=="hidden"||d.nodeType!=1)){d=d.nextSibling}var f=curtop=0;if(d&&d.offsetParent){f=d.offsetLeft;curtop=d.offsetTop;while(d=d.offsetParent){var e=f;f+=d.offsetLeft;if(f<0){f=e}curtop+=d.offsetTop}}return[f,curtop]},_checkExternalClick:function(d){if(!c.colorPicker._curInst){return}var e=c(d.target);if((e.parents("#colorPickerDiv").length==0)&&c.colorPicker._colorpickerShowing&&!(c.blockUI)){if(e.text()!=c.colorPicker._curInst._colorPickerDiv.text()){c.colorPicker.hideColorPicker()}}},hideColorPicker:function(d){var e=this._curInst;if(!e){return}if(this._colorpickerShowing){this._colorpickerShowing=false;this._lastInput=null;this._colorPickerDiv.css("position","absolute").css("left","0px").css("top","-1000px");if(c.blockUI){c.unblockUI();c("body").append(this._colorPickerDiv)}this._curInst=null}if(e._input[0].value!=c.css(e._sampleSpan,"background-color")){e._sampleSpan.css("background-color",e._input[0].value)}},_connectColorPicker:function(f,e){var d=c(f);if(this._hasClass(d,this.markerClassName)){return}c(d).attr("autocomplete","OFF");e._input=c(d);e._sampleSpan=c('<span class="ColorPickerDivSample" style="background-color:'+e._input[0].value+";height:"+e._input[0].offsetHeight+';">&nbsp;</span>');d.after(e._sampleSpan);e._sampleSpan.click(function(){d.focus()});d.focus(this.showFor);d.addClass(this.markerClassName).keydown(this._doKeyDown);d[0]._colId=e._id},_showColorPicker:function(e){var d=this._getInst(e);this._updateColorPicker(d);d._colorPickerDiv.css("width",d._startTime!=null?"10em":"6em");d._colorPickerDiv.show("fast");if(d._input[0].type!="hidden"){d._input[0].focus()}this._curInst=d;this._colorpickerShowing=true},_updateColorPicker:function(d){d._colorPickerDiv.empty().append(d._generateColorPicker());if(d._input&&d._input[0].type!="hidden"){d._input[0].focus();c("td.color",d._timePickerDiv).unbind().mouseover(function(){d._sampleSpan.css("background-color",c.css(this,"background-color"))}).click(function(){d._setValue(this)})}}});function b(){this._id=c.colorPicker._register(this);this._input=null;this._colorPickerDiv=c.colorPicker._colorPickerDiv;this._sampleSpan=null}c.extend(b.prototype,{_get:function(d){return(this._settings[d]!=null?this._settings[d]:c.colorPicker._defaults[d])},_getValue:function(){if(this._input&&this._input[0].type!="hidden"&&this._input[0].value!=""){return this._input[0].value
}return null},_setValue:function(d){if(this._input&&this._input[0].type!="hidden"){this._input[0].value=c.attr(d,"title");c(this._input[0]).change()}c.colorPicker.hideColorPicker()},_generateColorPicker:function(){var d=new Array("#000000","#000033","#000066","#000099","#0000CC","#0000FF","#330000","#330033","#330066","#330099","#3300CC","#3300FF","#660000","#660033","#660066","#660099","#6600CC","#6600FF","#990000","#990033","#990066","#990099","#9900CC","#9900FF","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#003300","#003333","#003366","#003399","#0033CC","#0033FF","#333300","#333333","#333366","#333399","#3333CC","#3333FF","#663300","#663333","#663366","#663399","#6633CC","#6633FF","#993300","#993333","#993366","#993399","#9933CC","#9933FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#006600","#006633","#006666","#006699","#0066CC","#0066FF","#336600","#336633","#336666","#336699","#3366CC","#3366FF","#666600","#666633","#666666","#666699","#6666CC","#6666FF","#996600","#996633","#996666","#996699","#9966CC","#9966FF","#CC6600","#CC6633","#CC6666","#CC6699","#CC66CC","#CC66FF","#FF6600","#FF6633","#FF6666","#FF6699","#FF66CC","#FF66FF","#009900","#009933","#009966","#009999","#0099CC","#0099FF","#339900","#339933","#339966","#339999","#3399CC","#3399FF","#669900","#669933","#669966","#669999","#6699CC","#6699FF","#999900","#999933","#999966","#999999","#9999CC","#9999FF","#CC9900","#CC9933","#CC9966","#CC9999","#CC99CC","#CC99FF","#FF9900","#FF9933","#FF9966","#FF9999","#FF99CC","#FF99FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#66CC00","#66CC33","#66CC66","#66CC99","#66CCCC","#66CCFF","#99CC00","#99CC33","#99CC66","#99CC99","#99CCCC","#99CCFF","#CCCC00","#CCCC33","#CCCC66","#CCCC99","#CCCCCC","#CCCCFF","#FFCC00","#FFCC33","#FFCC66","#FFCC99","#FFCCCC","#FFCCFF","#00FF00","#00FF33","#00FF66","#00FF99","#00FFCC","#00FFFF","#33FF00","#33FF33","#33FF66","#33FF99","#33FFCC","#33FFFF","#66FF00","#66FF33","#66FF66","#66FF99","#66FFCC","#66FFFF","#99FF00","#99FF33","#99FF66","#99FF99","#99FFCC","#99FFFF","#CCFF00","#CCFF33","#CCFF66","#CCFF99","#CCFFCC","#CCFFFF","#FFFF00","#FFFF33","#FFFF66","#FFFF99","#FFFFCC","#EEEEEE","#111111","#222222","#333333","#444444","#555555","#666666","#777777","#888888","#999999","#A5A5A5","#AAAAAA","#BBBBBB","#C3C3C3","#CCCCCC","#D2D2D2","#DDDDDD","#E1E1E1","#FFFFFF");var h=d.length;var g=18;var f="<table border='1px' cellspacing='0' cellpadding='0'>";for(var e=0;e<h;e++){if((e%g)==0){f+="<tr>"}f+='<td class="color" title="'+d[e]+'" style="background-color:'+d[e]+'"><label>&nbsp;&nbsp;&nbsp;</label></td>';if(((e+1)>=h)||(((e+1)%g)==0)){f+="</tr>"}}f+='<tr><td title="" style="background-color:#999" class="color" colspan="'+g+'" align="center"><label>No Color</label></td></tr>';f+="</table>";return f}});c.fn.attachColorPicker=function(){return this.each(function(){var e=this.nodeName.toLowerCase();if(e=="input"){var d=new b();c.colorPicker._connectColorPicker(this,d)}})};c.fn.getValue=function(){var d=(this.length>0?c.colorPicker._getInst(this[0]._colId):null);return(d?d._getValue():null)};c.fn.setValue=function(e){var d=(this.length>0?c.colorPicker._getInst(this[0]._colId):null);if(d){d._setValue(e)}};c(document).ready(function(){c.colorPicker=new a();c(document.body).append(c.colorPicker._colorPickerDiv).mousedown(c.colorPicker._checkExternalClick)})})(jQuery);